---
import { getBlogs, getBlogDetail } from '../library/microcms'
const response2 = await getBlogs({ fields: ["id", "title", "image", "tags", "publishedAt",] })
export async function getStaticPaths(){
    const response = await getBlogs({fields: ["id"]})
    return response.contents.map((content)=>({
        params:{
            blogId: content.id
        }
    }))
}
const { blogId } = Astro.params;
const blog = await getBlogDetail(blogId);


import Layout from '../layouts/Layout.astro';
import Footer from '../layouts/footer.astro';
import '../css/inner/inner.css'
import '../css/blogId/anim-blogid.css'
import '../css/blogId/blogid.css'
---

<Layout title={blog.title}  />

<main>
    <article class="article">
        <div class="inner inner--article">
            <div class="article__container">
                <section class="article-main">
                    <img class="article__thumbnail" src={blog.image.url} alt=""  />
                    <p class="article__publish">
                        <time datetime={blog.publishedAt.substring(0, 10)}>公開日 : {blog.publishedAt.substring(0, 10)}</time>
                    </p>
                    <p class="article__updated">
                        <time datetime={blog.updatedAt.substring(0, 10)}>最終更新日 : {blog.updatedAt.substring(0, 10)}</time>
                    </p>
                    <h1 class="article__title">{blog.title}</h1>
                    <p class="article__intro">{blog.intro}</p>
                    <div class="article__text" set:html={blog.content} />
                </section>
                <aside class="article-aside">
                    <div class="article-aside__inner">
                        <p>ああああ</p>
                        <p>ああああ</p>
                        <p>ああああ</p>
                        <p>ああああ</p>
                        <p>ああああ</p>
                        <p>ああああ</p>
                        <p>ああああ</p>
                        <p>ああああ</p>
                        <p>ああああ</p>
                        <p>ああああ</p>
                        <p>ああああ</p>
                        <p>ああああ</p>
                        <p>ああああ</p>
                    </div>
                </aside>
            </div>
        </div>
    </article>

    <div class="blog">
        <div class="inner inner--blog">
            <div class="blog-contents">
                <ul class="blog-contents__list">
                    {response2.contents.map((content => 
                        <li class="blog-contents__item">
                            <a class="blog-contents__link" href={"../"+content.id}>
                                <img class="blog-contents__thumbnail" src={content.image.url} alt="" />
                                <h3 class="blog-contents__title">{content.title}</h3>
                                <div class="blog-contents__tags">
                                    <p class="blog-contents__tag">UI</p>
                                    <p class="blog-contents__tag">Figma</p>
                                    <p class="blog-contents__tag">Figma</p>
                                </div>
                                <time class="blog-contents__time">{content.publishedAt.substring(0, 10)}</time>
                            </a>
                        </li>
                    ))}
                </ul>
            </div>
        </div>
    </div>
</main>

<Footer />

<style lang="scss">
    .header{
        display: none;
    }
</style>